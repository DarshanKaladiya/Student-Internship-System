{% extends 'management/base.html' %}
{% block content %}

<style>
    /* Background Pattern */
    body {
        background-color: #f0f2f5;
        background-image: radial-gradient(#000000 0.5px, transparent 0.5px);
        background-size: 20px 20px;
    }

    /* Floating Command Modules */
    .command-module {
        background: white;
        border: 4px solid black;
        border-radius: 30px;
        box-shadow: 15px 15px 0px black;
        padding: 50px;
        position: relative;
        overflow: hidden;
    }

    .command-module::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 10px;
        background: #4285f4;
        border-bottom: 4px solid black;
    }

    /* Industrial Headers */
    .glitch-header {
        font-size: 5rem;
        font-weight: 950;
        line-height: 0.8;
        margin: 0;
        letter-spacing: -4px;
        text-transform: uppercase;
        color: black;
    }

    .data-label {
        display: inline-block;
        padding: 5px 15px;
        font-weight: 950;
        font-size: 0.75rem;
        text-transform: uppercase;
        border: 3px solid black;
        border-radius: 8px;
        margin-bottom: 15px;
    }

    /* THE FIXED ANCHOR DESIGN */
    .sync-btn-external {
        display: block;
        width: 100%;
        background-color: #4285f4; /* Sync Blue */
        color: white !important;
        text-decoration: none !important;
        font-weight: 950;
        font-size: 1.4rem;
        padding: 24px;
        border: 4px solid black;
        border-radius: 18px;
        /* Stacked Shadow Effect */
        box-shadow: 0px 10px 0px black; 
        transition: all 0.1s ease-in-out;
        text-transform: uppercase;
        text-align: center;
        box-sizing: border-box;
        cursor: pointer;
    }

    .sync-btn-external:hover {
        transform: translateY(2px);
        box-shadow: 0px 8px 0px black;
        background-color: #3367d6;
    }

    .sync-btn-external:active {
        transform: translateY(10px);
        box-shadow: 0px 0px 0px black;
    }

    .local-btn {
        background-color: #adff2f;
        color: black !important;
    }

    .protocol-footer {
        display: block;
        font-size: 0.7rem;
        font-weight: 900;
        color: #94a3b8;
        margin-top: 20px;
        text-align: center;
        text-transform: uppercase;
        letter-spacing: 2px;
    }
</style>

<div style="max-width: 1300px; margin: 60px auto; padding: 0 30px;">
    <div style="display: grid; grid-template-columns: 1fr 400px; gap: 50px;">
        
        <div class="command-module">
            <div class="data-label" style="background: #adff2f; color: black;">Node_Active</div>
            <h1 class="glitch-header">{{ internship.title }}</h1>
            <p style="font-size: 1.8rem; font-weight: 800; color: #4285f4; margin: 20px 0;">@{{ internship.company_name }}</p>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin: 40px 0; background: #f8fafc; padding: 30px; border: 3px solid black; border-radius: 20px;">
                <div>
                    <p style="font-weight: 900; color: #94a3b8; text-transform: uppercase; font-size: 0.75rem;">Credits Stipend</p>
                    <p style="font-weight: 900; font-size: 1.5rem; margin: 0;">{{ internship.stipend|default:"Non-Paid" }}</p>
                </div>
                <div>
                    <p style="font-weight: 900; color: #94a3b8; text-transform: uppercase; font-size: 0.75rem;">Sync Deadline</p>
                    <p style="font-weight: 900; font-size: 1.5rem; margin: 0;">{{ internship.deadline|date:"d M Y" }}</p>
                </div>
            </div>

            <h3 style="font-weight: 950; text-transform: uppercase; margin-bottom: 20px;">Mission Briefing</h3>
            <div style="font-size: 1.2rem; font-weight: 600; line-height: 1.6; color: #334155; margin-bottom: 40px;">
                {{ internship.description|linebreaks }}
            </div>

            <h3 style="font-weight: 950; text-transform: uppercase; margin-bottom: 20px;">Required Arsenal</h3>
            <div style="display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 50px;">
                {% for skill in internship.required_skills.split %}
                    <span style="background: white; border: 3px solid black; padding: 10px 20px; border-radius: 12px; font-weight: 900; box-shadow: 4px 4px 0px black;">{{ skill }}</span>
                {% endfor %}
            </div>

            
            <div>
                {% if internship.external_apply_link %}
                    <a href="{{ internship.external_apply_link }}" target="_blank" rel="noopener noreferrer" class="sync-btn-external">
                        INITIALIZE_EXTERNAL_APPLICATION (GOOGLE FORM)
                    </a>
                {% else %}
                    <form action="{% url 'apply_internship' internship.pk %}" method="POST">
                        {% csrf_token %}
                        <button type="submit" class="sync-btn-external local-btn" style="width: 100%; border: 4px solid black;">
                            SYNC_LOCAL_APPLICATION
                        </button>
                    </form>
                {% endif %}
                <span class="protocol-footer">SECURE TRANSMISSION PROTOCOL ENABLED</span>
            </div>
        </div>

        <div style="display: flex; flex-direction: column; gap: 40px;">
            <div class="command-module" style="padding: 40px; box-shadow: 10px 10px 0px black;">
                <div class="data-label" style="background: #4285f4; color: white; margin-bottom: 25px;">
                    Commanding_Officer
                </div>

                <h3 style="font-size: 2.8rem; font-weight: 900; margin: 0; line-height: 1; text-transform: uppercase;">
                    {{ internship.faculty.userprofile.full_name|default:internship.faculty.username }}
                </h3>
                
                <p style="font-weight: 950; color: #10b981; font-size: 1.1rem; text-transform: uppercase; margin: 15px 0; letter-spacing: 1px;">
                    {{ internship.faculty.userprofile.research_interest|default:"Senior_Systems_Architect" }}
                </p>

                <hr style="border: none; border-top: 3px solid #f1f5f9; margin: 25px 0;">

                <div style="display: flex; flex-direction: column; gap: 25px;">
                    <div>
                        <p style="font-weight: 900; color: #94a3b8; text-transform: uppercase; font-size: 0.75rem; letter-spacing: 1px;">Sector_Location</p>
                        <p style="font-weight: 800; font-size: 1.2rem; margin: 5px 0 0;">
                            {{ internship.faculty.userprofile.office_location|default:"Marvadi University" }}
                        </p>
                    </div>

                    <div>
                        <p style="font-weight: 900; color: #94a3b8; text-transform: uppercase; font-size: 0.75rem; letter-spacing: 1px;">Contact_Signal</p>
                        <p style="font-weight: 800; font-size: 1.1rem; margin: 5px 0 0; color: #4285f4;">
                            {{ internship.faculty.email|default:"SIGNAL_ENCRYPTED" }}
                        </p>
                    </div>
                    
                    <div style="margin-top: 10px; padding: 15px; border: 3px solid black; border-radius: 15px; background: #f8fafc;">
                        <p style="font-weight: 950; text-transform: uppercase; font-size: 0.65rem; color: #64748b; margin-bottom: 5px;">Dossier_Status</p>
                        <p style="font-weight: 900; font-size: 0.9rem; margin: 0;">VERIFIED_INSTRUCTOR_NODE</p>
                    </div>
                </div>
            </div>

            <a href="{% url 'internship_list' %}" style="display: block; text-align: center; border: 4px solid black; padding: 22px; text-decoration: none; color: black; font-weight: 950; text-transform: uppercase; background: white; border-radius: 20px; box-shadow: 8px 8px 0px black; margin-top: 30px;">
                Return to Network
            </a>
        </div>

    </div>
</div>

{% endblock %}