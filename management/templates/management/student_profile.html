{% extends 'management/base.html' %}
{% load static %}

{% block content %}
<div class="header-area" style="margin-bottom: 40px;">
    <h1 style="font-size: 2.8rem; font-weight: 900; color: white;">Identity <span style="color: var(--primary);">Synchronization</span></h1>
    <p style="opacity: 0.8;">Update your academic profile and professional credentials to match institutional records.</p>
</div>

<div class="auth-wrapper" style="align-items: flex-start; justify-content: flex-start; min-height: auto;">
    <div class="glass-card" style="width: 100%; max-width: 900px; padding: 50px;">
        
        <form method="POST" enctype="multipart/form-data" class="auth-form">
            {% csrf_token %}
            
            <div style="display: grid; grid-template-columns: 250px 1fr; gap: 40px;">
                <div class="profile-pic-section" style="text-align: center;">
                    <div style="width: 200px; height: 200px; border-radius: 24px; overflow: hidden; margin-bottom: 20px; border: 2px solid var(--glass-border); background: rgba(0,0,0,0.2);">
                        {% if user.userprofile.profile_pic %}
                            <img src="{{ user.userprofile.profile_pic.url }}" style="width: 100%; height: 100%; object-fit: cover;">
                        {% else %}
                            <div style="display: flex; align-items: center; justify-content: center; height: 100%; font-size: 3rem; opacity: 0.2;">ðŸ‘¤</div>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        <label style="cursor: pointer; background: rgba(99, 102, 241, 0.1); color: var(--primary); padding: 10px; border-radius: 8px; font-size: 0.7rem; font-weight: 800;">
                            UPLOAD NEW IMAGE
                            <input type="file" name="profile_pic" style="display: none;">
                        </label>
                    </div>
                </div>

                <div class="profile-details-section">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div class="form-group">
                            <label>Full Name</label>
                            {{ form.full_name }}
                        </div>
                        <div class="form-group">
                            <label>Roll Number</label>
                            {{ form.roll_no }}
                        </div>
                        <div class="form-group">
                            <label>Department</label>
                            {{ form.department }}
                        </div>
                        <div class="form-group">
                            <label>Semester</label>
                            {{ form.semester }}
                        </div>
                    </div>
                    
                    <div class="form-group" style="margin-top: 20px;">
                        <label>Technical Skills (CSV)</label>
                        {{ form.skills }}
                    </div>

                    <div style="margin-top: 40px; display: flex; gap: 20px;">
                        <button type="submit" class="btn-primary" style="padding: 16px 45px;">UPDATE IDENTITY</button>
                        <a href="{% url 'student_dashboard' %}" class="btn-primary" style="background: rgba(255,255,255,0.05) !important; text-decoration: none; padding: 16px 45px;">RETURN</a>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}