{% extends 'management/base.html' %}
{% block content %}

<style>
    /* Show Password Badge - Command Style */
    .password-toggle {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        cursor: pointer;
        font-weight: 900;
        font-size: 0.65rem;
        background: var(--sync-neon);
        color: black;
        padding: 6px 12px;
        border: 2px solid white;
        border-radius: 8px;
        text-transform: uppercase;
        user-select: none;
        transition: 0.2s;
        z-index: 10;
    }
    
    /* Neon Glow Effect when validated */
    .valid-glow {
        border-color: var(--sync-neon) !important;
        box-shadow: 0 0 15px var(--sync-neon);
    }
</style>

<div style="display: flex; justify-content: center; align-items: center; min-height: 90vh; padding: 40px 20px;">
    <div class="brutalist-card" style="width: 100%; max-width: 500px; background: #000; color: #fff; border-color: white;">
        
        <div style="text-align: center; margin-bottom: 45px;">
            <div style="background: var(--sync-neon); color: black; display: inline-block; padding: 10px 25px; border: 4px solid #fff; transform: rotate(2deg); font-weight: 950; font-size: 1.2rem; box-shadow: 6px 6px 0px var(--sync-blue);">
                FACULTY_AUTH_INIT
            </div>
            <h1 style="font-size: 3rem; font-weight: 950; letter-spacing: -2px; margin-top: 25px; text-transform: uppercase; color: #fff;">
                AUTHORIZE<br>COMMAND
            </h1>
        </div>

        <form method="POST">
            {% csrf_token %}
            
            {% for field in form %}
            <div style="margin-bottom: 25px;">
                <label class="industrial-label" style="background: var(--sync-neon); color: black; margin-bottom: 10px; border: 2px solid white;">
                    {{ field.label_tag|striptags }}
                </label>
                
                <div style="position: relative;">
                    <input type="{{ field.field.widget.input_type }}" 
                           name="{{ field.name }}" 
                           id="id_{{ field.name }}"
                           required
                           {% if "password" in field.name.lower %}oninput="checkStrength(this)"{% endif %}
                           style="width: 100%; border: 4px solid #333; padding: 18px; border-radius: 15px; font-weight: 800; font-size: 1rem; box-sizing: border-box; background: #111; color: white; transition: 0.3s;">
                    
                    {% if "password" in field.name.lower %}
                        <span class="password-toggle" onclick="toggleFacultyPassword('id_{{ field.name }}', this)">Show</span>
                    {% endif %}
                </div>
            </div>
            {% endfor %}

            <button type="submit" class="sync-btn" style="width: 100%; padding: 22px; font-size: 1.3rem; background: var(--sync-neon); color: black; border-color: white;">
                ESTABLISH_COMMAND_LINK
            </button>
        </form>
    </div>
</div>



<script>
    // Validation: Add Neon Glow if password is 8+ characters
    function checkStrength(input) {
        if (input.value.length >= 8) {
            input.classList.add('valid-glow');
        } else {
            input.classList.remove('valid-glow');
        }
    }

    function toggleFacultyPassword(fieldId, btn) {
        const field = document.getElementById(fieldId);
        if (field.type === 'password') {
            field.type = 'text';
            btn.innerText = 'Hide';
            btn.style.background = 'white';
        } else {
            field.type = 'password';
            btn.innerText = 'Show';
            btn.style.background = 'var(--sync-neon)';
        }
    }
</script>

{% endblock %}