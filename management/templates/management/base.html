<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Internly | Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    {% if messages %}
    <div class="message-container" id="alert-box">
        {% for message in messages %}
        <div class="glass-alert {% if message.tags == 'error' %}alert-error{% else %}alert-success{% endif %}">
            <div class="alert-icon">{% if message.tags == 'error' %}⚠️{% else %}✓{% endif %}</div>
            <div class="alert-content">
                <h4>SYSTEM SIGNAL</h4>
                <p>{{ message }}</p>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <aside class="sidebar">
        <div class="sidebar-brand">
            <a href="{% url 'home' %}" class="brand-link">
                <div class="brand-icon">
                    <span class="icon-inner">I</span>
                    <div class="icon-glow"></div>
                </div>
                <span class="brand-text">Internly</span>
            </a>
        </div>

        <nav>
            <a href="{% url 'home' %}" class="nav-item">Dashboard</a>
            <a href="{% url 'internship_list' %}" class="nav-item">Internships</a>

            {% if user.is_authenticated %}
                <div class="sidebar-section-label">Workspace</div>
                {% if user.userprofile.role == 'STUDENT' %}
                    <a href="{% url 'student_dashboard' %}" class="nav-item">My Applications</a>
                    <a href="{% url 'student_profile' %}" class="nav-item">Edit Profile</a>
                {% else %}
                    <a href="{% url 'faculty_dashboard' %}" class="nav-item">Review Board</a>
                {% endif %}
                <a href="{% url 'logout' %}" class="nav-item" style="color: var(--secondary); margin-top: 20px;">Logout</a>
            {% else %}
                <div class="sidebar-section-label">Login</div>
                <a href="{% url 'login' %}?role=Student" class="nav-item">Student Portal</a>
                <a href="{% url 'login' %}?role=Faculty" class="nav-item">Faculty Portal</a>
                
                <div class="sidebar-section-label">Join</div>
                <a href="{% url 'register' %}" class="nav-item">Student Signup</a>
                <a href="{% url 'faculty_register' %}" class="nav-item">Faculty Signup</a>
            {% endif %}
        </nav>
    </aside>

    <main class="main-content">
        {% block content %}{% endblock %}
    </main>

    <script>
        setTimeout(() => {
            const alertBox = document.getElementById('alert-box');
            if (alertBox) {
                alertBox.style.opacity = "0";
                setTimeout(() => alertBox.remove(), 800);
            }
        }, 4000);
    </script>
</body>
</html>