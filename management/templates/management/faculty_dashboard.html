{% extends 'management/base.html' %}
{% load static %}

{% block content %}
<div class="header-area">
    <div class="header-text">
        <h1 style="font-size: 3.5rem; font-weight: 900; color: white; letter-spacing: -2px;">
            Faculty <span style="color: var(--primary);">Command</span>
        </h1>
        <p style="font-size: 1.1rem; opacity: 0.8;">Oversee institutional opportunities and student synchronization.</p>
    </div>
    <a href="{% url 'post_internship' %}" class="btn-primary">
        + INITIALIZE NEW NODE
    </a>
</div>

<div class="stats-grid">
    <div class="glass-card" style="flex-direction: column; align-items: flex-start;">
        <h3 style="color: var(--secondary); font-size: 0.75rem; font-weight: 800; letter-spacing: 1px;">ACTIVE POSTINGS</h3>
        <p class="stat-value">{{ internships.count }}</p>
        <p>Current live opportunities</p>
    </div>
    <div class="glass-card" style="flex-direction: column; align-items: flex-start;">
        <h3 style="color: var(--primary); font-size: 0.75rem; font-weight: 800; letter-spacing: 1px;">PENDING SIGNALS</h3>
        <p class="stat-value">{{ pending_applications.count }}</p>
        <p>Awaiting institutional authorization</p>
    </div>
</div>

<h2 style="margin: 40px 0 20px; color: white;">Review Queue</h2>
<div class="opportunity-grid">
    {% for app in pending_applications %}
    <div class="glass-card">
        <div class="card-info">
            <h3 style="color: white; margin-bottom: 5px;">{{ app.student.username }}</h3>
            <p>Targeting: {{ app.internship.title }}</p>
        </div>
        <div style="display: flex; gap: 10px;">
            <form action="{% url 'review_application' app.pk 'APPROVED' %}" method="POST">
                {% csrf_token %}
                <button type="submit" class="btn-primary" style="background: #10b981;">AUTHORIZE</button>
            </form>
            <form action="{% url 'review_application' app.pk 'REJECTED' %}" method="POST">
                {% csrf_token %}
                <button type="submit" class="btn-primary" style="background: var(--secondary);">TERMINATE</button>
            </form>
        </div>
    </div>
    {% empty %}
    <div class="glass-card" style="justify-content: center;">
        <p>No Pending Signals</p>
    </div>
    {% endfor %}
</div>
{% endblock %}